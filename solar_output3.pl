#!/user/bin/perl -w

use strict;
use warnings;
use WWW::Mechanize;
use HTTP::Cookies;

# Set constants
my $system_id = '712162';
my $api_key = 'f28df63641562571da21a10255e8c6ca';
my $user_id = '4e544d334f544d790a';
my $my_url_info = "key=" . $api_key .
                  "&user_id=" . $user_id;

# Get today's date for the report.
use DateTime qw();
my $report_date = DateTime->now(time_zone => 'America/Los_Angeles');
$report_date = $report_date->strftime('%Y-%m-%d');

my $tmpl_infile = "/home/gene/projects/perl/google_solar_chart.tmpl";
my $html_outfile = "/home/gene/projects/perl/solar_output.html";
my $html_chart = "cms.asskick.com/solar_data/solar_output.html";
my $outfile = "/home/gene/projects/perl/solar_output.png";
my $temp_url = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAADICAYAAAAeGRPoAAAgAElEQVR4Xu1dC7iN1dYeG5Hbya0tskViPxG/IucoHbkcHbl26ogtUe73xHHid43ogij3OlG5RFHsUhTxC/0d5HLit3GS7bhs11wj2/6fd+7m8q1lrb3nWvtb3/rW2u98Hk+7b83v9n5jjHeOMcccMy4jIyND2IgAESACRIAIEIGoRiCOhB7V348PTwSIABEgAkRAIUBCpyAQASJABIgAEYgBBEjoMfAR+QpEgAgQASJABEjolAEiQASIABEgAjGAAAk9Bj4iX4EIEAEiQASIAAmdMkAEiAARIAJEIAYQIKHHwEfkKxABIkAEiAARIKFTBogAESACRIAIxAACJPQY+Ih8BSJABIgAESACJHTKABEgAkSACBCBGECAhB4DH5GvQASIABEgAkSAhE4ZIAJEgAgQASIQAwiQ0GPgI/IViAARIAJEgAiQ0A1lYPbs2TJp0iQ5cOCAFC1aVJo0aSIzZ85Ufwdq33zzjTz00EPy+eefy5///GfDO3l3q1evnmzYsEEdzJMnj9xxxx0ycOBA6d27d0jX0yc999xz8vbbb8v58+dDus6JEydkwYIF0q9fP7HjPUN6CJ5EBIgAESACHgRI6AbC8MMPP8g999yjiPSZZ56R77//Xjp16iSDBg2Sl19+OeyE/p///EfmzJkjv/76q2Bg8dFHHymSf+CBBwye3n+XnBI6BgN493379snly5flyJEjUrp0aSlYsGDIz8QTiQARIAJEIHQESOgG2K1cuVJ52PDQBwwYoM5IS0uTW2+9VeLi4uS7776Tvn37Coi/bNmyMnjwYOnSpYuX59qwYUPlVS9dulSuXbsm7du3lzfffFOwHX3evHmlZ8+esmzZMnnllVfkqaee8jwVPPQzZ87Iv/71L3Vs586dUqNGDXVutWrVBNcdOnSoTJ48Wfbs2SOHDx/2+yy4J7zp999/X+688071D+8FD71mzZpSoUIF+eSTT9S9ihcvLq+99poasKxfv1698//93/9J9erV1YBi+/bt0qFDB/U8BQoUkK+++sorEhEIj7Vr10qDBg3Utd944w25ePGiTJgwQQ2O2IgAESACRCBnCJDQDfD75Zdf5MEHH5StW7fK7bffLiDZxx57TNq0aaNIqVKlSnL//ffLrFmzVBh+zJgxiuThueqQO4h++vTp0q1bN0WajRo1UkSI/+bLl08NBN577z0VCShVqtQNhL5t2za5evWqIsDhw4erc0GmuP6f/vQnGTt2rFSuXFnuvvtuv89y/PhxadasmSL+Vq1aKWLFsawIvUePHlKxYkVp3LixGswkJSXJhQsX5Ntvv5WOHTvKxo0bZdeuXfLPf/7T8554nuzwePzxx2Xq1Kny5JNPqoHCsWPHDL4CuxABIkAEiEBWCJDQDeUjPT1dVq1aJatXr1Zz4iAyeK4g9j/+8Y/K88bfR48elTJlysi4ceMUyWlCr1WrloAgd+zYITfddJPs3r1b5s6dq4gRhN61a1eZMWPGDU9jnUPXP/bq1UumTZvmiQB88MEHihzhTQd6litXrsioUaMEc98lS5ZU0YJ33303S0L/wx/+oJ4fnjsGAdYGrxpz5wi5W+fQCxcunC0eH3/8sbRu3VoNfEaMGKEGPvnz5zf8EuxGBIgAESAC/hAgoRvIxU8//aRC3c2bN1e9ESYHcWLeGKQM0tOEjpA3vPjx48crT14T+pdffqkIOzU1VXmkCJdjXhzECEIPNB+Pa2CQANJGUhxC5cWKFVPP4ZuMpv/f37OANK2EjsHFvHnzFKHfe++9Uq5cOUlOTlYhezw/wuKIOjz88MOiCRjXuHTpkrp/IEIvUqSIER6YwsAc/JAhQ9Q1b775ZoMvwS5EgAgQASIQCAESuoFswBvu06ePIh+ErTF/Di+5Tp06KtMbJAvyQ6IY5rZBVAjPnzt3zkPoH374oSxatEj279+vfkc/hLExr50doVvn0K2P60voCIcHehYMJFq0aCGvvvqq8rYx947rgtDxTnhehNLhtY8cOVIROqYHkFWPkP6UKVOkbdu2ajCCMDlyBPBOmNvHgEcPXPBfEzxI6AaCxy5EgAgQgSAQIKEbgAWP/MUXX1QeNTzYQoUKySOPPKLmoxFeBxH2799fJcUlJCSoMHK7du28POj4+Hh54okn5PTp0zJ69Gj12/LlywVz45g3z8pDNyV0vEqgZ8GUAcL6ixcvlsTERBUhwAADXjfmwpGkh/tgLh7vgikDJPdhrh4Z8T/++KNKnkOUAUl5eHYk7yFUDmLHAEEvzzPBg4RuIHjsQgSIABEIAgESehBgsSsRIAJEgAgQAbciQEJ365fhcxEBIkAEiAARCAIBEnoQYLErESACRIAIEAG3IkBCd+uX4XMRASJABIgAEQgCARJ6EGCxKxEgAkSACBABtyJAQnfrl+FzEQEiQASIABEIAgESehBgsSsRIAJEgAgQAbciQEJ365fhcxEBIkAEiAARCAIBEnoQYLErESACRIAIEAG3IkBCd+uX4XMRASJABIgAEQgCARJ6EGCxKxEgAkSACBABtyJAQnfrl+FzEQEiQASIABEIAgFXEfrVq1fVhifYaxw7kPXt21eqV6/u9Trog13KsGsZWlJSktSvX18CHUcfbCf6xRdfqP7YIQ07hbERASJABIgAEYglBFxF6Ni1C7t6YZcvEDb24cYuZNaGXb6wqxm2Mj116pQi/VmzZsmaNWv8Hj9+/LiMGTNGsAUqdgbDtbETWu3atWPpO/JdiAARIAJEIJcj4CpCx97gvXv3Vtt7BmrDhw9X+3lrQsZ2nw0aNFAeuL/jR44ckZ9//lk6d+6sLpmcnCzYGxz7mbMRASJABIgAEYgVBFxF6G3atFEhdOwVjvbss89K1apVvbAG4cNrr1ixojo+ffp0KVeunKxcudLv8aNHjwr2Im/durXqv2HDBuXNY2DARgSIABEgAkQgVhBwHaE/9dRT0rJlS0lJSZERI0bIggULJE+ePB68fQkdofTy5csrD91K9Po4PHQroWOwsHbtWhk2bJjxN9yyZYtxX3YkAkSACBAB+xGoVauW/ReNsSu6itB79uwpQ4cOlYSEBAUzvPWpU6dKiRIlPLCPHDlSmjVrppLb0ED6TZs2VYTu7zgI/eTJk9K1a1fVf8mSJYJ59R49ehh/ShA6hUmEOBADrTSUhUwkiAMxMCYSBzq6itDnzZunXhleOua5kcA2f/58NQeenp4upUqVkhUrVsjWrVuVh52WliZ9+vSROXPmyLp16/weR+IcwuszZsxQmfP9+/dXZF6jRg1jeKm0NF4kMm91oU5QJ6gTxhTiWEdXEfrly5fltddek4MHDyryhVd97733KlI/e/aswIMHsU+ZMkWF5NE6duwodevWDXgcfZYtW6YGAmj16tWTDh06BAUwjReNF40XCd2f0aBtoIceFJmEubOrCD3QuyJkjpB6+/btwwyH/8tTaUnoJHQSOgmd9jEiBBTETaOC0Pft2yeFCxeWMmXKBPFq9nUloZPQSei5h9DPXUyXooXyGhkQ2gZ66EaC4lCnqCB0h7AIeBsqLQmdhB59hL4l5bzXQ9eqUiRbU5K88aTM/vSwLBhW1YjUaRtI6NkKlYMdSOgGYFNpSegk9NAJ/fDJK1K2ZH4DTbveBeccOXnFc6BMyfxe19iTeknWbT/j+b1KuYLycM1inv8fNfeAfLrp5A33RJ/mdUt69dWd1m47I4NmZJaURp9RnSpk+8y0DST0bIXEwQ4kdAOwqbQkdBJ6aIS+ec85RZKzBiZKYkJBA23L7JI0ZpekHLrk1V+R9r3FZe33p2/4DR3bNYqXgW0SZFbyYXnr0yNSpGBewTlo5y6ly17L9WpVKSojO1XwDBIwQOg+cY+cv5TuueeEnpX8Er/1oWgbSOjGQu1ARxK6AchUWhI6CT14QsdcdNLYXcrTBrmakjrItf3YXV6EDHK3ki2uBy8ac924zwdr0tQDgsD1QMCXkOH1b9lzTiYuTlXXwjUSEwqp8/akXlTHcM0qCYVk0uJU9fuC4VWzjC7QNpDQDSjEsS4kdAOoqbQkdBJ68IQ+YVGqIloQoyZQf6Tum4Smw+VtG8bLoCczi0yhISQOjx8k3OKBkl4P5Othj+xY4YY++gTcD6TuG5K3htkHTt+vQvrw5GcNrBLQSvjahoWr01SEwDr4QJgf/4AD3gH/8DsGH0UL5ZNaiUXV37iXaTKegdlyrAvto2NQZ3sjEnq2EHEESjK7LiQ0XmaDOxBvj0mZtSLmD6sqC1cfUwQKUuveoqwKj6PhGIgf/4/jINsWQ3cqwls+rnpQc+84t9vEPYrwTea/MQg4d/Gq5+PiPE2o1ufIanCg5QH9R797QJF1Tlq3FmWlW/PIrOYJ9bmpE6EiZ/95JHQDTCmwZkbcAMqo70JZ8JYFkOKnm06ouWurB6xD7V2bl1FEjaY9dvwNbxRtS8o5z3kIkSMsjnD3fZWLyOxBgXddDCRIwSw5y04YkfEOkkZCXqCsd8hDlbtrek0tYDChE/TwPNorP3zysrR4oJT6DUmCGPRg4IJwP6YCtu7NzMoHNsAiWrx16kR2kuTc7yR0A6wpsCR0LSaUheuyYCUya7i6+8QURdSVyxWUhcO9d0sEuSGkrkPS8NhBYAhv42+QGObcTRLSDFQ3x126TdijiNY6MLFeFPKw+XAZlYSH953Y666gogrWa+kEQj09YR0YADeE83WWvpvInjqRYzGz7QIkdAMoKbAkdBK6t6Ks37hFZqy+noCGX0HqaDq0HigJDl4rSB2eL7x3kJOes8b5t5XIL5+Or26gmeHvoqcOAiXIAYfhizNzBGY+X0VqJ2ZGHkJtwGbg9H0ebx0EjmPWSIbGGveq/1/FIu7J0z6G+rXtP4+EboApBZaETkL3VpS+E7fIppRM8k1qXFqFyXULJqNdn6Pnv7G0LJA3bKCqYemik/TwXjrBTYfUR87aLJ9tjQt5iiDQAy9YnSazLcl1uDfm1xGat66/x/mIcCBJUA+owgJCFhelfXQa8cD3I6EbfAsKLAmdhH5dUfTcspW49TH0CtVT1Znq2S0VM1BZW7tgXh+h96OnvAvdJDUqLdM/SZVLV0J/56weVGfjI5KBe+kwO54HIXhfckc/zNG3axjvqNdO+2iruOXoYiR0A/gosCR0Evp1RUEWOua5fbO/QepovkvKDFTM0yWUqnLBXD8nfTWRLvjqmBe5m1aVy8m9A52rk+6wVE4PODDQwjfAkji0opY1++F4BtrHcKAa2jVJ6Aa4UWBJ6CT0TAT0nHKJIiKrJtYy0J7Y7ILBiybRYJfXhQsRfBuE6XW2vPU+Ol8hHGF52sdwfdHgr0tCN8CMAktCj3ZCh7GHB1emZIHfCpqY7Sbmqx56PrnZfRkyunttA+2J3S7wjhd/vk06P+6ugQ2+tTWJzrokLrMmfgGVkAhyz2kSH74u7aN7ZJyEbvAtKLAk9GgndN/NShCWTR5XPai5VhBYgwHbFBTjkuKkSf37DLQntrtEi22wRhSsXwSkjhoCOVkGFy0YxLYkZr4dCd3gK1NgSejRTuh6PTXWSutNSnxLq2ZXlAWZ18hmx1KppN+fkVq13OWZGqiy7V2izTYgD+DwicvKg8e6dr3mPTNLvlRQG+hEu07YLgwuuCAJ3eAjRJvSGrxSSF2IQ/SGF2t336K++dev11TV2LD5CZrOSIdxR31zLIHCsjF/oVidDKeqmKXvJ6FHebgZcjBqzo9ec+4IxWcWrzEnd9qFkMxpWE4ioRvASoGlhx7N3ogOlavNQSbXVK+itxiFAQeJ+25U4lt+VO8Vrou+UCdiRyewXDB54wm1FM66NC+rwZ3VbFIWDEjEoS4kdAOgKbCxY7wMPneWXaJRFnRmum999HZjdnnC77pwCTYr0aFYeGrwxtF8l6pFIw45/fb+zo81HEDu2EhH7wiHd85unj3WMAiHnDh1TRK6AdIUWBJ6NHvoeu7bd720dd9xa5lWhGKTxuzylDPFmnNsUmItyUqdiG2dQFRnwepjqkY9GgZ82MrW37I3yoIBiTjUhYRuADQFNraNl4EIeLpEoyzoXc78lVQF2beoiyIk3svYrCF5GHckT1kLyUQjDsF8Z9O+sY6D7zy7vzB8rGNgKgtu6OdKQk9NTZUePXrIK6+8Ivfcc48XTqtWrZKZM2fKLbfcoo7fdNNNMnv2bLl69apMmjRJ9u/fr44nJSVJ/fr11d9Lly6VL774Qv1dp04d6dKlS1DYU2BJ6NHsoesM92BLslpD8r7heupE7tIJ313yqpQrqGr4w2OnLARFJ2Ht7DpCv3btmgwePFjOnz8vffr0uYHQP/74Y/n555+lU6dOXsAsX75cfvjhBxkyZIicOnVK+vbtK7NmzZLjx4/LmDFjZNq0aZI/f3517Xbt2knt2uZFMSiwuct4ZaVxbpUFeOGJCYX8ll3V89/zh1UNalmSnnsHHr6DAbfiEFZr6efiuQkHHYbXORaAAx570+rnpXUT1iRwWvb83c91hL5w4UIpUKCAbN++Xf7617/eQOjz589XXnmbNm283mf48OHSqlUrD1GPHTtWGjRoIEeOHFEDgM6dO6v+ycnJgghAr169jPHPTUobjWRm/CFt6OhWWcCcd8qhSzfUV8cr6yVrm2cFv24cA4WU1Isye1CiF3puxcGGTxzUJXIrDr6FarATXLfmZYLCjp3tR8BVhP7jjz+qcPrLL78so0aN8kvoCK+npKRIRkaGXL58WVq3bi2NGzeW3r17y6BBg6RixYoKpenTp0u5cuXk6NGjEh8fr/qhbdiwQdasWSMYAJi23Kq0vvgQB3euQ8c8Z8uhOz2fyzrXrb1sFJRZOLyqqch7+sErO3cpXcqWzE9Cz+Ueuu/rQzaQa/HBmjT1E8LwIztVDCoKFLRA8oQsEXANoWMO/G9/+5sKiZcpU0ZGjhzpl9B37NihiPz++++XEydOSL9+/eSll16SCRMmeBE6Quzly5dXHrqV0L/55htZu3atDBs2zFg0QGRsRMCtCKz+V5ws3pgh2DDl1PnMp+z0cJzUrZIh2w6IzFgl8l93iPR6xK1vwOeKZgRST8bJ9JUZHtlrUTtOGlbLkEIF7H0rVibMHk/XEPru3buVZ/673/1OPfWhQ4ekRIkSMmDAgBvC7tbXGj9+vCL39evXS7NmzVTSG9qIESOkadOmitBPnjwpXbt2VceXLFmi5tWRdGfa6JlmIkUc3InBwOn7Zd32MyrcjoYlZmjYBQwFQ7D0yF+Gu6n8++tHWaBOaLmALFS5u6aXt45lbqhjgFC8b3QnJ3LHc7NGwDWE7vuYVg/99OnTkp6eLqVKlVLJbZUrV5YmTZrIhQsXFDG/+OKLggHB1q1bleedlpamEurmzJmjEuQQXp8xY4bky5dP+vfvr86pUaOGsWzQeNF4WY2XmzwF64YpKOuK5Wd6IxbUascack32Odmn3FdZqBPUCX86gSkeJM1B5nRD4lxmrfiSxjaXHUNDICoIHYlwZ8+elZ49e8rhw4fV8jSQOUi+ZcuW0rx5c/X3lClT1Pw6WseOHaVu3brq72XLlsmKFSvU3/Xq1ZMOHToEhRaNF42XWwldl2S1LiuzFoyBd4RkuWCXrGWnINQJ6kRWOoG8DuzNbq04hzn259sk2LJla3bymVt/dy2hWz8IQuZYR96+ffuIfCcaLxovtxK69sZhKJMaxXv0Q6891wdCyXDPStmoE9QJE51ABAmkjuQ5XSdebwADzx1heTb7EHCc0BEOP3jwoFqaVrZsWSlZMvswzL59+6Rw4cIqWS4SjcaLxsvEeEVCNh9+bpuq4ob5cutcpXUNuXVTFruekTpBnQhWJ0Dq1jXsOJ+Z8XZpZOZ1HCP0TZs2qcpvZ86ckdtvv12FzBE+B0m3bdtWnnzyScmTJ4+9b2fT1Wi8aLyCNV42iV6Wl9GhdWuNdesJ2kv3rfJmx7NRJ6gToeoEBpvw2q27u7VrFC/dmpe9oQSxHbKam67hGKFPnTpVZZ1XqpS5e5Nu27Ztk3nz5imvHYlrJh670x+IxovGK1TjFU5Z1fXWkfyGjTN8m55fD/R7Tp6NOkGdyKlO+NsApnuLsgJyZwsNAccIHZXabr75ZunevbvfDHN48CgGg39FixYN7W3CdBaNF41XdsYLlbPszCI3EWXtgWOL00Bzkc2H7FQ1t63z6ybXzq4PdYI6kZ1OZCdD+ndEmiYuOihb92YWUWDynClyN/ZzjNCvXLkiqMP+zjvvqOVnIPY//vGPXk+kK8AlJnqXmQz99ew5k8aLxis744V66cnjqtsjcIZXManRjoEGkpBqJ9o7SKZOUCey0wlDMfZ0Q0QJpYZ18hyWuXEde3AoOkbo+rFQshWV2v7xj38I1peD2B999FG1RtytjcaLxisr46VD23ZnkmenD6Y12rGEyO7iHtQJ6oTdhK6v55s8R2LPzhJc/91xQrc+2q5du9SOaCjnCs9d12E3f3xnetJ40XhlZbz0fuN2r/XOSrp1QlyoNdpzqjnUCepEuAgd19Xr2D/ddFLdJhyJnTnVATee7xihv/XWW/L999+rMqzIdEft9ri4OLWvefHixeWFF16Qu+66y40YseTpb1+FRtx/6desdjoLl0D7KygTrnv5uy5lgYQeTkLX19bEDi/d7mkjJ/XFqXs5Rujvv/++oOIbSrY+++yzUqxY9BQUoPGi8QpkvKw7nYUjmzyQIdAZ7nbXaDc1PNQJ6oQThG4qj+yXiYBjhI6bYZe0pUuXyqJFiwT1sFGeFTuiub3ReNF4BTJeSDrTm6E4GRbUFeKsW6U6qUfUCeoECd1JjTO7l6OErh8JiXFff/212jwFS9TgsdeuXdvsiSPQi8aLxiuQ8dLEit/DUZEtkLjrJWtOzttbn4U6QZ0goUeAjLK5pWOEDu8c8+f4hx3Q9Fw6CsugTjvC8dgG1Y2NxovGK5Dx0qVXQeb+SrCGS551hrveYS1c9wl0XeoEdYKE7rTWZX8/xwg9KSlJbXEaHx8vt956q+ef/v/69eu7dl6dxovGy5/xspZexbIwFMZwwmPW8/ZORgR8TQl1gjpBQs+eYJ3u4Riho6hM69atVWZ7tDUaLxovf8Zrweo0mbQ4Ve3zDHL9YE2aOJGkpjdecXLOnoTu32rRNvhf+RFtNj5WntcxQkcy3MaNG2X06NFq57RoalRaEro/Qtfz2EhMQ0NyHMh9VKfM/7ejIQqQmFDQ61LWgYSd9wrmeakT1Al66MFojDN9HSN0vM6HH34oWI+Ouu7YqOV3v/ud5y0vXbqkMuBr1qwp1apVc+btDe9C40Xj5c94Weex96RelB6TUlQd6gXDqxpKVtbdEFrHenPfOuy6kI0T0YBAT0idoE6Q0G1Rc1sv4iih48l/+ukntQHLmjVrVIY75tNB5idOnJDHHntM+vTpIwULensktr5xCBej8aLx8jVeurCLtVKbaSlWUxHEkrjkjSdk9iDvvQ0ineGO56dOUCdI6Kaa7Fw/xwldvxoqxR09elRlu4PYK1SowP3QnfvuId2JRvw6kfnbuhQ7m2FjifnDqt4QJg8FcL0kzjeTXW/KsnxcddtrtJs+J2WBhE5CN9UW5/pFjNCde8Wc34nGi8bL13gNnL5f1m0/I9bCLvpYVtuZBiONmrh9r2d3JCCYZ6IR90aLtoHRmlD0J1znkNANkKXSktB9iUzXb7d643aWY7WWlLUm2ukM90htykJCJ6H7mkzaRwMScaiL44T+2WefSbNmzRx6PXtuQ4ElofsSmT8v2c4NU6wlZbGfud5rXWe41/+vYjKxVyV7BDyEq1AnqBMc3IWgOGE+xXFCHzlypHTr1k1uv/32ML+afZen8aLxshqvjCJVVEa7r5esC81YCThUKbSWlMU1dCQgEju7+XsH6gR1goQeqnaH7zzHCX3KlCmyatUqQeW4OnXqyJ133il58+ZVb/jDDz+o/dGvXLmiCtB06dJFbeJibUimmzRpkuzfv18dxnVQZS7QcfTBcjiUl0XDPXHdYBqNF42X1XgdvlxBrTn35yXbNb+t588xaNh76JI83yZBHq5ZTFoO3elozfhAekKdoE6Q0INhEWf6Ok7oO3bsENRvB3mjFOzBgwdVhvurr74q7733njz99NNSpUoV9RuOYQMXa1u+fLk6d8iQIaomfN++fdUgAMvg/B0/fvy4jBkzRqZNmyb58+eXwYMHS7t27YLaDIbGi8bLarw2Hy4jb316xG9VODuWlFlLu6JwzKAZ+wVV4aokFFLV6OwuXhOKqaFOUCdI6KFoTnjPcZzQ8TqnT59W684rVaok165dU9526dKlvWq5g6DhVYPUrW348OHSqlUrDyGPHTtWGjRooPr6O37kyBH5+eefVTEbtOTkZElNTZVevXoZI0vjReNlNV6zvi4SsG67v+x3Y0H7raOeP0cEAITeYMA29QtC+UdOXnGkXnx2z0ydoE6Q0LPTEud/d5zQUf71hRdekF9++UWFwuFlYx16xYoV1dvv2rVLXnzxRSlQoICMGzfuhrn23r17y6BBgzz9UaSmXLlysnLlSr/HsdYdG8Cgjjzahg0blDePgYFpo/Gi8bIar4HvB95ZzY5Mdz1/jjA7qsRprx/PcFuJ/PLp+Oqmohu2ftQJ6gQJPWzqFfKFHSd0VIIbNmyYTJw4Ufr37y9nz56VoUOHyuLFi1VIXLdvvvlG3nnnHXn77be9Cs74EjpC6eXLl1ceupXo9XF46FZCx3XXrl2rnsG0wXixEQEgcPGyyIB3M7GY1e1GTLYdEJmxSqTybRkyqGVoGxGN+ShDDp2Kk2GPx0lCyQxZvjlDPtuaea0G1TKk7YOhXZdfkAhEMwK++VTR/C7henbHCb1r164yefJkGTVqlCJ0eNfjx4+X5s2bqzA8wue6/eUvf1G130uWLOk5hix5LHtDchvaiBEjVF14ELq/4yB0VKPDfeUb4BEAAB4WSURBVNGWLFkimFfv0aOHMab0RuiNaGFZkLxFJn0qak7btyQr+uQ00/3cxXRPiH3zrMyEUH1N/B3J6nBWhaFOUCe0PFAWjKkk7B0dJ3SExr/99ltFskhQg/eM+W3MhYOs+/XrJ/fdd5+aV0doftGiRWoOPD09XUqVKiUrVqyQrVu3Kg87LS1N1X5H4ty6dev8HkdIH+H1GTNmSL58+dQgAmReo0YNY3ApsDReWlhefXerLN6YIW0bxsugJxP8ylBOMt0DrWV/+Lltag59oU0bvxgLf4CO1AnqBAk9p1pk//mOEzpeAXPnr7/+utx0001y5swZgScOgk5JSZE333zTs2wN69VB7vPnz1eh+Z49eypix9I39EXr2LGj1K1bN+Bx9Fm2bJkaCKDVq1dPOnToEBSSNF40Xlpg+k7cIptSRC0j890FTfdpN2aXWmoWSk133/lzfU0cR5Z7oHsGJdA2dKZOUCdI6DYoks2XcJzQMc999913S9u2bVWGO9abFylSJMvXgjePkHr79u1tfn2zy9F40Xh5yHrkZtl7NC7LTHOdxBZsTXdruVff0Doy37EOvWihzJoNkW7UCeoECT3SWnjj/R0ndHjaH3zwgfKaGzVqpDxs6xy5P4j27dsnhQsXljJlykQEQRovGi8teNY90AORa6iZ7vo8N6wzz07RqBPUCRJ6dlri/O+OE7p+RVR2g9e9cOFCueuuu2TAgAFe69CdhyLwHWm8aLyAgLXgy9rJNQMKjHUdeTD11jFPfv5SuivWmWenf9QJ6gQJPTstcf53xwkdCWyo6Hbu3Dn1D2VekYmOuXPMl7ux0XjlPuOFbPNPN52Udo3iPSKp57ez86D1jmhVyhWUBYZJbHoQEOld1Ez1jzqR+3QikGxQFky1Jvz9HCd0EDcKuzz11FNqqRoKyLi9UWBzl/ECkSP8japsOvkNBI/66vCgTZaOBZvp3n1iimxJOee1v7qb9YI6kbt0IitZpCy4R1MdJ3S8Okq/InMdRV4effRRefzxx9UcuVsbBTZ3GC+E1EfPPaCIVbciBfOqrUuTN52USYtTVcGYhaNrZyuqzYfslKOnrmRL/hgoTFycqqIBuFdWofxsb+pgB+pE7tAJE5GiLJig5Ewfxwkdy87Onz8vFy5cUGVfUSHuyy+/lLlz50piYqIzbx3kXSiwucN46aQ0EOvANgmCNeHrtp9R2eV7Ui8qj71nE5HOj3vvAOhPnEw2aUGYHWQOrx9tZMcK0uKB60WUghRTR7tTJ3KHTpgIFWXBBCVn+jhO6FhbjqIxyGwvUaKE57/YAa1s2bLOvHWQd6HARrfx2pJyXhVlKVvyemlhfyLgm5QGjx37j2vCRR310U9cuWFLX3/XmrAoVe2M1rV5Gene4ka5tlaEQ9W5Uc9UzPb5ghTbsHanTkS3TtgpHJQFO9HM2bUcJ/ScPW5kzqbARq/x0pXXtOSA2Fs8UEraNYz3WtMdKClNe+04H/PpicVSjQh9weo0FaIPlEAXaiZ8ZDTgxrtSJ6JXJ+yWIcqC3YiGfj3HCR37n6P8KjLdb731VpUYhz3NsysuE/or5vxMCmx0Gi9fD9sqCQirJzUuLd2aZ9Y2yCopTVd++/r1mpKye5sRoetMd9wHme6+0QE7tlnNuWSHfgXqRHTqROhfPPCZlIVwoBraNR0n9L///e/SpEkTtQnLsWPHVIEZJMfNmzcvtDdw4CwKbHQaL03S2FdcrwcH0c5OPqz2M0eDB92tRVlpOXSnSkpDApxvwRicg6Q17E0ejCzogQCWr80amOi5rjXcjkGCW6q/BaNKweAQzHWjrS9xkKB0Itq+b7Q9r+OE3qVLF5k9e7bXlqjYMe3pp59WBWbc2Ki00UfoOuSdFUkPmrFfzY+jD/6b3fpyoBCMLIC4u03co+q6W0k92sPtweLgRp2265mCkQe77um26xAD93wRxwn9jTfeUOH1Z5991oMCCB112pnl7h7B8Pck0aK4Vg945vNVpHZiUb/AYlvS7hP3eJLeTNaXB4uBldSRLY/67jrcntUGL+6WhOAGNm5/l5w8X7DykJN7ufVcYuCeL+M4oV+8eFGVeUWmO7Ywxdaoly5dUiH3PHnyuAcZy5NQYKPLQw/GAwapj5r7oxQtmNfv/ua+AhmKLFjn8hEFQPgezWQA4UqFCDJS4dZ3sOO5QpEHO+7rpmsQA/d8DUcJHaVe//3vf0vFihXVfujbtm1T9duxpSm2UnVro8BGF6EHm3AGLxrrzAN58la5DFUWMHBoP3aX51LRUuI1kE6GioNbdTzU5yIOjNaEKjvhOM8xQt+7d6/ah7x48eKKzMeOHauS46KhUWmjh9CtW5CGI+EsJ7KgIwdAM5rD7Xj+nOAQDTpv+ozEgbJgKitO9HOM0IcOHSoPPfSQNG3aVI4eParIfdWqVWo/dLc3Km30ELpOhrNmttspXzmVBV1wJprD7ST06xKVU3mwUzYjdS1iECnkb7yvY4QOAp8wYYKULl1aPQWy3ceMGROxPc6D+QQU2OghdFR2Szl0KWxlVO2QBRSr8Vc9LhiZjHRfO3CI9DvYcX/iQA/dDjmy6xqOETpKuyLDHcVk0Pr166cKzFSqVMmudwnbdai00UHopvuV50RQKAvRIQs5+cbBnEt5IKEHIy/h7usooZcrV05ltmN52ltvvSUvvPACCT3cX9jG67vdeGVXbtUOKNyOgR3vaHIN4sCBjZYTyoKJxjjTxzFCR6nXrVu3yu7du9W/lJQUtTlLtWrVpGrVqgIPXnvvzry6+V0osO43XqjZPmruAbWmHGu9seY7HI2y4H5ZCMd3D3RNygM9dCflLbt7OUbovg9y7do1OXDggIfgH3vsMdd661Radxtxa/a4SbW37JQiq98pC+6WhZx821DOpTyQ0EORm3CdEzFCD/RCK1eulKlTp8r48ePlnnvuuaEbMuNnzpwpt9xyi/oN69dRSvbq1asyadIkVbAGLSkpSerXr6/+Xrp0qXzxxRfq7zp16qiEvGAalda9Rnz2p0dUbXa0tg3jZdCTCcF82qD7UhbcKwtBf0wbTqA8kNBtECPbLuEqQv/yyy9VKB6kjNKw/gj9448/VtXlOnXq5AXC8uXL1Q5uQ4YMkVOnTqkd3GbNmiXHjx9X2fTTpk2T/Pnzy+DBg1V4v3bt2sYgUmmdM+IowIKweUrqRVVbPauNSxBi11XXRnasIC0eKGn8TUPtSFlwThZC/UZOnkd5IKE7KW/Z3ctVhI6ysIUKFVKki81a/BH6/PnzlVfepk0br3cbPny4tGrVykPUKFyDHd2OHDmiBgCdO3dW/ZOTkyU1NVV69eqVHTae36m04TXiqNS2cE2aLPjqmKeuOu6IDU2w9ai/pskcG6sMbJPgCJnjOSgL4ZUFY6V0SUfKA3XCJaKoHsNVhK6ByYrQEV6HF5+RkSGXL1+W1q1bS+PGjaV3794yaNAgVVYWbfr06YKsehSxiY+PV/3QNmzYIGvWrBEMAEwblTY8Rtwfkd9WIr/aOxxryQPtgGYlc2xLmphQ0PRT5rgfZSE8spDjDxOhC1AeSOgREj2/t406Qt+xY4ci8vvvv19OnDih1rO/9NJLqmiNldARYi9fvrzy0K2Ejr3X165dK8OGDTP+DlBaNvsQOHk+TpI3Z8i2AyKXrmRet/JtGdKidpwkls38/9STcTIxOUP93uy+DGlZO7Oi4Ny1IptSRArmFxnYIk4SSmbY92C8EhEgAq5FoFatWq59Nrc8WNQRui9wSJ4Dua9fv16aNWumkt7QsCUrysyC0FE7vmvXrur4kiVL1Lx6jx49jL8BR+H2eWXwyrFlKTxwtPsqF5FuLcr63RgFS9GwZzkaQuvac8f/zx9W1VHPXAsLZcE+WTBWQBd3pDzQQ3eTeEYFoZ8+fVrS09OlVKlSKrmtcuXKamOXCxcuKGJ+8cUX1fI3rHOH552WliZ9+vSROXPmqAQ5hNdnzJgh+fLlU9XpcA4K3Jg2Kq09RtxK5thtbGKvuxRJZ9WwJG3B6mOy97cBAPo6lQDn77koC/bIgqnuub0f5YGE7iYZdRWhY378u+++k2PHjqltVQsUKCCTJ0+WZcuWydmzZ6Vnz55y+PBhtTwNZA6Sb9mypTRv3lz9PWXKFDW/jtaxY0epW7eu+hvnr1ixQv2NrVpRVz6YRqW1x4hb576Tx1XPMoPd9/ugrOuWPefUOeEqGmMiE5QFe2TBBOto6EN5IKG7SU5dReiBgEHIHOvI27dvHxHsqLQ5N+KRTGSzU2goCzmXBTu/R6SvRXkgoUdaBq33jwpC37dvnxQuXDhiO7NRaXNmxPWWobhKpOa+7VI6ykLOZMGu7+CW61AeSOhukUU8R1QQeqQBo9KGbsQXrk6TiYtT1QUiOfdtlwxRFkKXBbu+gZuuQ3kgobtJHknoBl+DShu8EUcFN+z7feRk5rq0WCBzvAdlIXhZMFCxqO1CeaBOuEl4SegGX4NKa27EsdQMHrkmchSKQX31SCayGXxi4y6UBXNZMAY1ijtSHkjobhJfErrB16DSZm/EUYN90uJU2ZJyTnUGkXdvUdaxkqwGn9GWLpSF7GXBFqCj5CKUBxK6m0SVhG7wNai0WRtxkDmKxaBUKwrAoFBMUqN4A2SjrwtlgYRulVrKAwndTVaMhG7wNai0gY24lcxRLGb2wMSg1pcbwO+qLpQFEjoJ3VslqRPuMVEkdINvQYH1b8StZI6tTkd1qmCAZnR3oSyQ0EnoJHS3WjESusGXoRG/0YijJOvodw+oH3ILmeNdKQskdBI6Cd2ANiLShYRuADuN+HUjXuXumiqLHcvS0No2jFdZ7LmlURZI6CR0Erpb7R0J3eDL0IhngrQgeYss3JRfLUlD8tvANgkxl8WenThQFkjoJHQSenZ2IlK/k9ANkM/tRhwbo2BJGtaYoyH5bVSnihHZvtTgc4W1S26XBQ0uceDAhrIQVlMT0sVJ6Aaw5VbjhaS3hauPecLrBfOL9GydELNL0gxEgXPov4GUW3XCV0aIA/NKTOyGU31I6AZI5zalxfz4gq+OSYplD3Ikvj1Q8ZQ0qX+fAWKx2yW3yUKgL0kc6KHTQ3efnSOhG3yT3GC8EFaHN47sdRSIQcM8OYg8qXFpKVsyP71TZrl7tCU36ISBaaBOUCdMxMSxPiR0A6hj1XghpP7pphNqblzXXtdz5EmNSt+Q8BarOBiIAInMByTKAj10eujBWA5n+pLQDXCOJeO1JeW8rN12+gYShzeODVTaNSodMNktlnAw+Ox+uxADEplVMCgPnEMP1ZaE4zwSugGq0ay0CKVvTTknm/ecUySuw+l4bWygAhKvnVjUaDe0aMbB4DMbdSEGJHQSureqUCeMTIcjnUjoBjBHm8DqUPqWPee8EtusJN7igVJBLzuLNhwMPm3QXYgBCZ2ETkIP2nA4dAIJ3QDoaDDi8MSRnZ688YTXfDhC6bWqFJVav3nhSG4LtUUDDqG+m+l5xICETkInoZvaC6f7kdANEHejET93MV3tPa7++XjiwYbSDSBQXdyIg+mz29WPGJDQSegkdLvsid3XIaEbIBopI47QuZ7zTkm9KIdPXpaU1EuyJ/Wi11w4XkEntWFOHP/C0SKFQzjeJdRrEgMSOgmdhB6q/Qj3ebmC0JcuXSpffPGFwrJOnTrSpUuXoHDNqRGHN62LtMCjRgNB47jyfH87FsxDgcCrlCsoVRIKeRLbgjk/lL45xSGUe7rtHGJAQiehk9DdZpf088Q8of/4448yZswYmTZtmuTPn18GDx4s7dq1k9q1axt/ExMjDm9676GLynuGFx0qUVsfCjXTixbMqw6BuIsWypwPL1uqgCr04nQzwcHpZ3L6fsSAhE5CJ6E7bXdM7xfzhP7RRx/Jzz//LJ07d1aYJCcnS2pqqvTq1csUI6+5Y+1tw8MGeaMgS3YetvamcUMkp6ElJhRSYXL9N8ja7Y1kxjwCLaOUBQ5sKAvus9gxT+izZ8+W+Ph4ad26tUJ/w4YNsmbNGhk+fLjx15i6cKvsPFzE79y1vggS0UDSVRIKKi86mojaFAgacRI6jTi9U197QbtgakHD3y/XEfo333wja9eulWHDhhmjW6vFKIkr2+J6/3MpknExVeJ+PSUZFw5K3KVDIukXja/HjkSACBABIhAcAps3bw7uhFzYO+YJHQlxJ0+elK5du6rPu2TJEjl+/Lj06NEjF35uvjIRIAJEgAjEKgIxT+iYL0d4fcaMGZIvXz7p37+/IvMaNWrE6jflexEBIkAEiEAuRCDmCR3fdNmyZbJixQr1eevVqycdOnTIhZ+ar0wEiAARIAKxjECuIPRY/oB8NyJABIgAESACQICETjkgAkSACBABIhADCJDQY+Aj8hWIABEgAkSACJDQKQNEgAgQASJABGIAARJ6DHxEvgIRIAJEgAgQgZgm9Ndee022bt0qN998s/rS1atXl+eff97rq1+9elUmTZok+/fvV8eTkpKkfv36Eui4Phlr29u3by+dOnWStm3beq75zDPPyB133CGjRo3yHPvll1/kr3/9q/zlL38R/O5kO3jwoIwcOdJzS7xXkSJF1DI+a8Pa/FdeeUXOnz+vat4PGDBAKlasqNbs+zuuz123bp2MHTtW3njjDbn77rvV4VOnTsmTTz6pyus+9thjntvs3LlT4Y/r3XfffU7CoO71j3/8Q/73f/9X4uLipGnTpp7qgdYHCbSRz/fffy9vvfWWXLt2TVUefOGFF6RQoUKeU1HnoFSpUjJ+/HjPsa+//lrGjRsns2bNkjvvvNNzfN68efLuu++qDYPy5nWm5O/KlStl6tSp6vnuuecez7Ps3r1bPeOf//xnJc++LSs9yGrTI7frx6+//ipvv/22fPLJJwJs/LVgdQLf+/XXX5eSJUuqy2VkZChbAp13o05AlmEHtm/frp61cuXKSu9vuukmLziC1Qm8L+QGy4Rx3eLFi0vfvn2VDrhJJxw3QA7cMKYJHaTaqlUruffeewNCuXz5cvnhhx9kyJAhSukgeDDAKA/r7zjIEO2DDz5QNeF37dolc+bM8SL0PHnyyOTJk6Vo0cwSsBBikEmjRo0cJ3TfF8dzgJBatLBUvhNRG9jUqlVLHn30UVW7HoQDkg50XF8XuMGAgZhgDDShY71/sWLF5M033/Q8AjBBtSeQutOE/t1338nChQsFgzwYMjzr3//+dylfvrzn+QJt5AP5wVLHl19+WfV/5513lKHS+wOAFHHs6NGjanB46623er47ZANLJbt16+a5T8+ePdVAadGiRY4Q+pdffikpKSlq0Prss896CP0///mP+j7lypVTRtcfoQfSDzx/VpseuV0/INuJiYkyZcoUz5JWX10JVieg5//zP//jGUBfunRJyRkIDmTpNp2Anq9evVr+9re/qVcfOnSoNGnSRBo0aJAjncD7jhgxQjkEaLgHBgXYIAsYuUEnHODWiNwipgkdO6vB6EJxrQ0jUpD29OnTVdEZkL7efQ3eJgQa3pO/4w8++KC6FDzz0aNHK48Hg4Bq1aqp4xBmXAuGX5MmyszedtttUrhw4YgS+pEjR5Q3DSOOQcfAgQNV5OAPf/iD8lZhhHU0A8eheE899ZTf4xjYpKWlSb9+/WTmzJmKKECYBQoUUAMjGIeCBQsqgwYsMGLv3r27il40b97ccUJHhcDTp097ts5977331PPhPf/0pz8JiOuzzz7zu5EPfgdmIAE0RD1eeuklJUNoIPG77rpLQJC33HKLivLogRwiRJC3uXPnKsxBrMAZ0Qr81wkP/eLFiyqaAH14+umnPYSOyBGiMfhuaJrQTfQDspTVpkdu1w+NCQawukYFMMiJTvzzn//0InRcDySGATQG827TCatNvHDhgpIPDDYRwcmJTvgS+rlz55ROYGMsELobdCIibOvATWOa0Hv37q3CoDA8MFzYB71KlSpy5coVgZDBs0SfQYMGeUaTIHl4LAjD+TvesmVL2bFjhwpfYuMXeFkw5DqUD2GGYoDkMPo/e/as8v4R0jxx4kRECX3ChAly//33qzAgGogXgwx4m1A4jKJ1A/nCuCG07HschgnE/P7776v3A4Y4BqOFf7gu3hkDGpA+yH7jxo2ybds29RuMqNMeOkgK4UVECRBy/+///m+pVKmSMmDwrEuXLq1C6v428oHXggGenrrAtAQICzv5gRSxHS8GP7gOvHiQtyZ0eO8YSOD7IwKCZ0CVQjyHU4Suv6kvoevj8+fP9yJ0E/3Auwba9Cia9MOX0HOiE//+97+9CB26gQEtbEOZMmVcpxP6+2PKBfr5xBNPKLlGy4lO+BI6iBx7aGCqDYTuJp1wgGMdvUVMEzrC5hUqVFBzN5gDhUAtWLBAeUq6+RI6RtTwKGHArYSuj4OkXn31VdUHc+cgLIRTtXcLYYY3ByIEySGsBaMPzzeShI5BTZ8+fVQo3fr+wAHP50voeCeE4hCWthI6jiPikJCQoMLQIEbMnSOsi3/ARhM6BhCIXoDs4NG2adNGFi9eHBFCx3ti8IXd9hBexmAOgxkdNsfvvjvz6Y184K1YCR2DQQxSPvzwQzXww2Y/eu4cHjCIE16ONl4gcvQBnsAPpA683UroVgsUSD/goVsJ3brpUTTphy+h63cPRScwpYFBPAaHaJhDxvWbNWvmWp3Q74tBKgaseNaGDRt6RCAUndB5QnCi4CzAQUK5bciL23TCUbZ14GYxTei++IGAQbZ6jhO/ayGuU6eO6o65HyRMwYBDuH2Pw7vCdSCcUFi0w4cPq9AzDL8m9K+++kolmIHQQXqbNm2KKKF//vnnsm/fPkWw/hoS9jDYwcADc8wYrcMDB2n7O75nzx4PseN66enpKlIB7xRJNfDQEZLGtAS8U5A6ohYI+UfCQ/d9Z0RYEGWw5hIE2sgH3xXJTjgHDThOnDhREfNzzz2n5sN1bgUGM7///e/VYFAbL0Q74PkgSfDbb79VXhtC/dFA6IH0A4Tub9MjyEs06UcgQsd3DlYnkKdhnUO3ypwe5LpJJxBRQNMJm0gQRB6JzoXBb6HohK+HbsXBbTrhAMc6eouYJXSMDEGy8IrgTe/du1fNl4OcMJ+rQ+6YP8OcDrxOeNvwYkE+yN72dxwCCaMMYtINkQBcBx6pJnTcAyFreILwWBB2iqSHjmQwJHc1btzY89w6vIh5b539DIJbv369qn+P9wl0HB43pi9ATLqB9DDFgYGQJnR4xMgmRige8/GRIvRDhw4pQkZ4EdEKkCu8KQzMdHgRffxt5ANvG543nh0RH1wHc+UPP/ywInQQs84MtkZsMIhDeBH3wlQO5lgRfsVqCzcTujXkHkg/IDv+sEJ+QTTpR6CQeyg64ZsUF4jQ3aIT2m5hmghRO8g3HBbk04SqExjQmRC6W3TCUbZ14GYxS+jADiNmZB9DWPEPYR8YZ2vSDzxLGHYkK6F17NhR6tatqzxOf8cRgkQf7bnjHCyBQQgV3j+IDP+Fx4ZBwkMPPSSPPPJIxAkdAxvM9Vrnrq0JQPC2MCWBeT8ki+E3hMr8HQeZQXHhwetMfu25wiPH/DCmG+CNABssYcOUBeYRI0XoeD541MiyRwQCBK2zeXUCEN470EY+SGJDhAFyAVzggSOxDvPxemtera+I8iCzHSSvCR3yBWywZA3nOEnoCJtCF44dO6ZWHoCs8I0QPcI3xAAHDd8VOQWIPOmk0UB6gP7+sIoW/YB8471/+uknFam5/fbb1fcJVScgE6aE7hadgNMDmYYc4G8kD+tla6HqBCJ8poQeSZ1wgFsjcouYJvSIIMqbEgEiQASIABGIAAIk9AiAzlsSASJABIgAEbAbARK63YjyekSACBABIkAEIoAACT0CoPOWRIAIEAEiQATsRoCEbjeivB4RIAJEgAgQgQggQEKPAOi8JREgAkSACBABuxEgoduNKK9HBIgAESACRCACCJDQIwA6b0kEiAARIAJEwG4ESOh2I8rrEQEiQASIABGIAAIk9AiAzlsSASJABIgAEbAbARK63YjyekSACBABIkAEIoAACT0CoPOWRIAIEAEiQATsRoCEbjeivB4RIAJEgAgQgQggQEKPAOi8JREgAkSACBABuxEgoduNKK9HBIgAESACRCACCJDQIwA6b0kEiAARIAJEwG4ESOh2I8rrEQEiQASIABGIAAIk9AiAzlsSASJABIgAEbAbARK63YjyekSACBABIkAEIoAACT0CoPOWRIAIEAEiQATsRoCEbjeivB4RIAJEgAgQgQggQEKPAOi8JREgAkSACBABuxH4fyJY1/K4bGhDAAAAAElFTkSuQmCC";

# Set user agent to avoid the dreaded lack-of-Flash bullshit. 
my $my_user_agent = 'Mozilla/5.0 (Linux; U; Android 2.2; de-de; HTC Desire HD 1.18.161.2 Build/FRF91) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1';

# URL for detailed solar data.
my $url_detail = "https://api.enphaseenergy.com/api/v2/systems/712162/stats?" . $my_url_info;;

# URL for google-generated chart.
my $url_chart = "http://localhost/solar_data/solar_output.html";

# URL get it.
my $mech = WWW::Mechanize->new( agent => $my_user_agent );
$mech->cookie_jar(HTTP::Cookies->new());
$mech->get($url_detail);

#$mech->get($url2);
#$mech->get($url3);

# Get HTML content of report.
my $html_string = $mech->content();
#print $html_string;

# For converting epoch time to something google can use for 'timeofday' data.
use POSIX 'strftime';

my @y_plot; 
my @x_plot;
my @tmp_data;

# First pass will get the timestamps
my $i = 0;
foreach my $val ($html_string =~ m/"end_at":\d+/g) {
#  print "$val\n";
  @tmp_data = split(':', $val);
  $x_plot[$i] = strftime('[%-H,%M,%S]',localtime($tmp_data[1]));
  $i++;
}

# Second pass will get the power values
# Reset $i.
$i=0;
foreach my $val ($html_string =~ m/"powr":\d+/g) {
  @tmp_data = split(':', $val);
  $y_plot[$i] = $tmp_data[1];
  $i++;
}

# This was for plotting timestamp every so man plots. 
# Unused now. Timestamps always.
my $n = 0; # number index of the position.
my $p = 1; # next position.
my $s = 4; # total position spots.
my $l = @x_plot;
my $m = int($l/$s); # distance between positions.
my $chart_data = "";

# Again, this was for plotting timestamp every so man plots. 
# Unused now. Timestamps always.
for ($i=0; $i<$l; $i++) {
  if (($i+1) == $p) {
#    print ",\n" . '[' . $x_plot[$i] . ', ' . $y_plot[$i] . ']';
    $chart_data = $chart_data . ",\n" . '[' . $x_plot[$i] . ', ' . $y_plot[$i] . ']';
    $n++;
    if ($n < $s) {
      $p = $n * $m;
    }
    else {
      $p = $l;
    }
  }     
  else {
# Timestamps always.
##    print ",\n" . '[\'\', ' . $y_plot[$i] . ']';
#    print ",\n" . '[' . $x_plot[$i] . ', ' . $y_plot[$i] . ']';
    $chart_data = $chart_data . ",\n" . '[' . $x_plot[$i] . ', ' . $y_plot[$i] . ']';
  }

}

# Open input template file.
open(FILE, "$tmpl_infile");

# Open html output file.
open(OUTFILE, ">$html_outfile");
#binmode(OUTFILE, ":utf8");

select((select(OUTFILE), $|=1)[0]);

# Open graph image output file.
#open(IMG, ">$outfile");
#binmode IMG;


while(<FILE>) {
  $_ =~ s/<CHART_DATA>/$chart_data/; 
  print OUTFILE $_;
}

# Close input and html output file handles;
close(FILE);
close(OUTFILE);

# Run WKHTMLTOIMAGE command to dump to PNG.
system(" /home/gene/wkhtmltox/bin/wkhtmltoimage --javascript-delay 6000 --width 800 --height 300 $html_chart $outfile");

